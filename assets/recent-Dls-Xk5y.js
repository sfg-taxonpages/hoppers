import{r as V,o as M,a as e,b as l,c as p,w as n,d as a,e as S,f as b,F as T,g as C,h as q,t as h,m as O,u as $,R as F,i as P}from"./index-Lzi61kGZ.js";const U={__name:"RecentTable",props:{per:{type:Number,default:10},attributes:{type:Object,required:!0},parameters:{type:Object,required:!0},route:{type:String,required:!0}},setup(m){const s=m,c=V([]),_=V(!1),u=V({page:1,total:0,per:s.per});async function f(r=1){_.value=!0,O.get(s.route,{params:{...s.parameters,per:s.per,page:r}}).then(({data:o,headers:i})=>{u.value=v(i),c.value=o}).finally(()=>{_.value=!1})}function v(r){return{page:Number(r["pagination-page"]),per:Number(r["pagination-per-page"]),total:Number(r["pagination-total"])}}return M(f),(r,o)=>{const i=e("VSpinner"),y=e("ClientOnly"),d=e("VTableHeaderCell"),g=e("VTableHeaderRow"),x=e("VTableHeader"),H=e("VTableBodyCell"),B=e("VTableBodyRow"),k=e("VTableBody"),R=e("VTable"),L=e("VPagination"),N=e("VCardContent"),w=e("VCard");return l(),p(w,null,{default:n(()=>[a(N,null,{default:n(()=>[a(y,null,{default:n(()=>[_.value?(l(),p(i,{key:0})):S("",!0)]),_:1}),a(R,null,{default:n(()=>[a(x,null,{default:n(()=>[a(g,null,{default:n(()=>[(l(!0),b(T,null,C(Object.values(m.attributes),t=>(l(),p(d,{key:t},{default:n(()=>[q(h(t),1)]),_:2},1024))),128))]),_:1})]),_:1}),a(k,null,{default:n(()=>[(l(!0),b(T,null,C(c.value,t=>(l(),p(B,{key:t.id},{default:n(()=>[(l(!0),b(T,null,C(Object.keys(m.attributes),j=>(l(),p(H,{key:j,innerHTML:t[j]},null,8,["innerHTML"]))),128))]),_:2},1024))),128))]),_:1})]),_:1}),a(L,{class:"mt-4",modelValue:u.value.page,"onUpdate:modelValue":[o[0]||(o[0]=t=>u.value.page=t),o[1]||(o[1]=t=>{f(t)})],total:u.value.total,per:u.value.per},null,8,["modelValue","total","per"])]),_:1})]),_:1})}}},A=["innerHTML"],D={__name:"RecentTaxonTable",props:{per:{type:Number,default:10},parameters:{type:Object,required:!0}},setup(m){const s=m,c=V([]),_=V(!1),u=V({page:1,total:0,per:s.per});async function f(r=1){_.value=!0,O.get("/taxon_names",{params:{...s.parameters,extend:["otus"],per:s.per,page:r}}).then(async({data:o,headers:i})=>{u.value=v(i);const y=await O.get("/otus",{params:{taxon_name_id:o.map(d=>d.id)}});c.value=o.map(d=>({...d,otu:y.data.find(g=>g.taxon_name_id===d.id)}))}).finally(()=>{_.value=!1})}function v(r){return{page:Number(r["pagination-page"]),per:Number(r["pagination-per-page"]),total:Number(r["pagination-total"])}}return M(f),(r,o)=>{const i=e("VSpinner"),y=e("ClientOnly"),d=e("VTableHeaderCell"),g=e("VTableHeaderRow"),x=e("VTableHeader"),H=e("VTableBodyCell"),B=e("VTableBodyRow"),k=e("VTableBody"),R=e("VTable"),L=e("VPagination"),N=e("VCardContent"),w=e("VCard");return l(),p(w,null,{default:n(()=>[a(N,null,{default:n(()=>[a(y,null,{default:n(()=>[_.value?(l(),p(i,{key:0})):S("",!0)]),_:1}),a(R,null,{default:n(()=>[a(x,null,{default:n(()=>[a(g,null,{default:n(()=>[a(d,null,{default:n(()=>o[2]||(o[2]=[q("Taxon name")])),_:1})]),_:1})]),_:1}),a(k,null,{default:n(()=>[(l(!0),b(T,null,C(c.value,t=>(l(),p(B,{key:t.id},{default:n(()=>[a(H,null,{default:n(()=>[t.otu?(l(),p($(F),{key:0,to:{name:"otus-id",params:{id:t.otu.id}},innerHTML:[t.cached_html,t.cached_author_year].join(" ")},null,8,["to","innerHTML"])):(l(),b("span",{key:1,innerHTML:[t.cached_html,t.cached_author_year].join(" ")},null,8,A))]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a(L,{class:"mt-4",modelValue:u.value.page,"onUpdate:modelValue":[o[0]||(o[0]=t=>u.value.page=t),o[1]||(o[1]=t=>{f(t)})],total:u.value.total,per:u.value.per},null,8,["modelValue","total","per"])]),_:1})]),_:1})}}},E={class:"container mx-auto py-4"},I={class:"flex flex-col gap-4 mt-4"},G={__name:"recent",setup(m){return(s,c)=>(l(),b("div",E,[c[0]||(c[0]=P("h1",{class:"text-4xl font-bold"},"Recent",-1)),P("div",I,[a(D,{parameters:{validity:!0,recent:!0,taxon_name_id:[330629],descendants:!0,taxon_name_type:"Protonym",recent_target:"created_at"}}),a(U,{attributes:{cached:"Source"},route:"/sources",parameters:{in_project:!0,recent:!0,recent_target:"created_at"}})])]))}};export{G as default};
